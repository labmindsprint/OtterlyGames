"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{415:function(e,t,a){a.r(t),a.d(t,{AchievementsScreen:function(){return x}});var r=a(7437),l=a(2265),n=a(6440),s=a(9637),i=a(6337),c=a(2474),o=a(4326),d=a(4606),m=a(5712),p=a(1876);function x(e){let{onNavigate:t}=e,{achievements:a,coins:x,claimAchievement:u,progress:h}=(0,c.G)(),{showRewardToast:g,showAchievementToast:b}=(0,o.p)(),v=a.filter(e=>e.unlocked).length,f=a.length,w=Math.round(v/f*100),[y,j]=(0,l.useState)(null),k=(e,t)=>{let r=a.find(t=>t.id===e);if(!r)return;let l=t.currentTarget.getBoundingClientRect(),n=l.left+l.width/2,s=l.top+l.height/2;u(e),(0,m.Hs)("unlock","heavy"),j({x:n,y:s,amount:r.reward})};return(0,r.jsxs)("div",{className:"bg-gradient-to-br from-pink-200 via-purple-200 to-blue-200 flex flex-col relative overflow-hidden",style:{minHeight:"100dvh",maxHeight:"100dvh",paddingTop:"calc(env(safe-area-inset-top, 0px) + 20px)",paddingBottom:"calc(env(safe-area-inset-bottom, 0px) + 12px)",paddingLeft:"calc(env(safe-area-inset-left, 0px) + 16px)",paddingRight:"calc(env(safe-area-inset-right, 0px) + 16px)"},children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 w-72 h-72 bg-gradient-to-br from-yellow-300/40 to-amber-300/40 rounded-full blur-3xl pointer-events-none"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-gradient-to-br from-purple-300/40 to-pink-300/40 rounded-full blur-3xl pointer-events-none"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3 landscape:mb-2 relative z-20 gap-2",children:[(0,r.jsx)(n.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{(0,m.GN)("click"),t("home")},className:"min-w-[36px] min-h-[36px] bg-white/80 backdrop-blur-md rounded-xl flex items-center justify-center shadow-lg border-2 border-amber-200 flex-shrink-0",style:{width:"clamp(44px, 10vw, 48px)",height:"clamp(44px, 10vw, 48px)"},children:(0,r.jsx)(s.Z,{style:{width:"clamp(16px, 5vw, 24px)",height:"clamp(16px, 5vw, 24px)"},className:"text-gray-700"})}),(0,r.jsxs)("div",{className:"flex items-center",style:{gap:"clamp(6px, 1.5vw, 10px)"},children:[(0,r.jsx)(p.F,{variant:"light",size:"md"}),(0,r.jsxs)("div",{id:"achievements-coins",className:"bg-gradient-to-r from-yellow-400 to-amber-500 rounded-xl px-2 sm:px-3 py-1 sm:py-1.5 shadow-lg border-2 border-white flex items-center",style:{gap:"clamp(4px, 1.5vw, 8px)"},children:[(0,r.jsx)("span",{style:{fontSize:"clamp(14px, 4vw, 20px)"},children:"\uD83E\uDE99"}),(0,r.jsx)(n.E.span,{initial:{scale:1.4,color:"#fef08a"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"font-bold text-white",style:{fontSize:"clamp(12px, 3.5vw, 18px)"},children:x},x)]})]})]}),(0,r.jsxs)(n.E.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-3 landscape:mb-1 relative z-10",children:[(0,r.jsx)("h1",{className:"font-bold text-gray-800 flex items-center justify-center",style:{fontSize:"clamp(1.125rem, 5vw, 1.75rem)",gap:"clamp(4px, 1.5vw, 8px)"},children:"\uD83C\uDFC6 Trophies"}),(0,r.jsxs)("p",{className:"text-gray-600",style:{fontSize:"clamp(0.625rem, 3vw, 0.875rem)"},children:["Level ",v]})]}),(0,r.jsxs)(n.E.div,{initial:{scale:0},animate:{scale:1},className:"bg-white/60 backdrop-blur-md rounded-2xl shadow-xl flex-shrink-0 mb-3 landscape:mb-2 border-2 border-amber-200",style:{padding:"clamp(8px, 2.5vw, 14px)"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",style:{marginBottom:"clamp(4px, 1vw, 8px)"},children:[(0,r.jsx)("span",{className:"text-gray-700 font-bold",style:{fontSize:"clamp(0.75rem, 3vw, 0.875rem)"},children:"Progress"}),(0,r.jsxs)("span",{className:"text-gray-700 font-bold",style:{fontSize:"clamp(0.75rem, 3vw, 0.875rem)"},children:[v,"/",f]})]}),(0,r.jsx)("div",{className:"bg-gray-200 rounded-full overflow-hidden",style:{height:"clamp(8px, 2vw, 12px)"},children:(0,r.jsx)(n.E.div,{initial:{width:0},animate:{width:"".concat(w,"%")},transition:{delay:.5,duration:.8},className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full"})}),(0,r.jsxs)("p",{className:"text-gray-600 text-center",style:{fontSize:"clamp(0.625rem, 2.5vw, 0.75rem)",marginTop:"clamp(2px, 0.5vw, 4px)"},children:[w,"% Complete"]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-h-0 touch-pan-y pb-2",children:(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 landscape:grid-cols-4 xl:grid-cols-5",style:{gap:"clamp(6px, 1.5vw, 10px)"},children:a.map((e,t)=>{var a;let l=(a=e.reward)>=12?{tier:"epic",borderColor:"border-purple-400",bgGradient:"from-purple-300 via-pink-300 to-purple-400",label:"✨ Epic"}:a>=8?{tier:"rare",borderColor:"border-blue-400",bgGradient:"from-blue-300 via-cyan-300 to-blue-400",label:"\uD83D\uDC8E Rare"}:{tier:"common",borderColor:"border-gray-300",bgGradient:"from-yellow-300 to-orange-400",label:"⭐ Common"},s=function(e,t){var a,r,l,n,s,i,c;switch(e){case"first_win":return{current:Math.min(t.battlesWon,1),target:1};case"battles_10":return{current:Math.min(t.battlesPlayed,10),target:10};case"battles_50":return{current:Math.min(t.battlesPlayed,50),target:50};case"battles_100":return{current:Math.min(t.battlesPlayed,100),target:100};case"win_streak_5":return{current:Math.min(t.highestStreak,5),target:5};case"win_streak_10":return{current:Math.min(t.highestStreak,10),target:10};case"perfect_easy":return{current:(null===(a=t.perfectBattles)||void 0===a?void 0:a.easy)?1:0,target:1};case"perfect_medium":return{current:(null===(r=t.perfectBattles)||void 0===r?void 0:r.medium)?1:0,target:1};case"perfect_hard":return{current:(null===(l=t.perfectBattles)||void 0===l?void 0:l.hard)?1:0,target:1};case"perfect_god":return{current:(null===(n=t.perfectBattles)||void 0===n?void 0:n.god)?1:0,target:1};case"lesson_complete":return{current:Math.min(Object.keys(t.lessonsCompleted||{}).length,1),target:1};case"all_lessons":return{current:Object.keys(t.lessonsCompleted||{}).length,target:6};case"explorer_10":return{current:Math.min(t.universeObjectsUnlocked||0,10),target:10};case"explorer_20":return{current:Math.min(t.universeObjectsUnlocked||0,20),target:20};case"explorer_30":return{current:Math.min(t.universeObjectsUnlocked||0,30),target:30};case"all_tanks":return{current:(null===(s=t.unlockedTanks)||void 0===s?void 0:s.length)||1,target:10};case"all_missiles":return{current:(null===(i=t.unlockedMissiles)||void 0===i?void 0:i.length)||1,target:10};case"all_skins":return{current:(null===(c=t.unlockedSkins)||void 0===c?void 0:c.length)||1,target:11};case"coins_1000":return{current:Math.min(t.totalCoinsEarned||0,1e3),target:1e3};default:return null}}(e.id,h),c=s?Math.round(s.current/s.target*100):0;return(0,r.jsxs)(n.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.03*t},className:"\n                  relative rounded-xl sm:rounded-2xl shadow-lg overflow-hidden border-2\n                  ".concat(e.unlocked?"bg-gradient-to-br ".concat(l.bgGradient," ").concat(l.borderColor):"bg-white/50 backdrop-blur-md border-gray-300/50","\n                "),style:{padding:"clamp(6px, 2vw, 12px)"},children:[(0,r.jsx)(n.E.div,{animate:e.unlocked?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:{},transition:{repeat:1/0,duration:3},className:"text-center",style:{fontSize:"clamp(1.5rem, 8vw, 2.5rem)",marginBottom:"clamp(2px, 0.5vw, 4px)"},children:e.unlocked?e.icon:(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)("span",{className:"opacity-30",children:e.icon}),(0,r.jsx)(i.Z,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-500",style:{width:"clamp(12px, 4vw, 18px)",height:"clamp(12px, 4vw, 18px)"}})]})}),(0,r.jsx)("h3",{className:"font-bold text-center truncate ".concat(e.unlocked?"text-yellow-900":"text-gray-700"),style:{fontSize:"clamp(0.625rem, 2.5vw, 0.75rem)",marginBottom:"clamp(1px, 0.3vw, 3px)"},children:e.name}),(0,r.jsx)("p",{className:"text-center line-clamp-2 ".concat(e.unlocked?"text-yellow-800":"text-gray-500"),style:{fontSize:"clamp(0.5rem, 2vw, 0.625rem)"},children:e.description}),!e.unlocked&&s&&s.target>1&&(0,r.jsxs)("div",{className:"mt-1.5 landscape:mt-0.5",children:[(0,r.jsx)("div",{className:"h-2 landscape:h-1.5 bg-gray-300/50 rounded-full overflow-hidden",children:(0,r.jsx)(n.E.div,{initial:{width:0},animate:{width:"".concat(c,"%")},transition:{delay:.03*t+.3,duration:.5},className:"h-full rounded-full ".concat("epic"===l.tier?"bg-purple-400":"rare"===l.tier?"bg-blue-400":"bg-yellow-400")})}),(0,r.jsxs)("p",{className:"text-gray-500 text-xs landscape:text-[10px] text-center mt-0.5",children:[s.current,"/",s.target]})]}),(0,r.jsx)("div",{className:"mt-1 landscape:mt-0.5",children:e.unlocked&&!e.claimed?(0,r.jsxs)(n.E.button,{whileTap:{scale:.9},animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:1.5},onClick:t=>{t.stopPropagation(),k(e.id,t)},className:"w-full bg-gradient-to-r from-yellow-400 to-amber-500 text-white text-sm landscape:text-xs font-bold py-1.5 px-2 rounded-lg shadow-lg border border-yellow-300",children:["\uD83E\uDE99 Claim +",e.reward]}):(0,r.jsx)("div",{className:"flex items-center justify-center gap-1 text-xs landscape:text-[10px] ".concat(e.unlocked?"text-yellow-900":"text-gray-500"),children:e.unlocked&&e.claimed?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-green-700 font-bold",children:"✓"}),(0,r.jsxs)("span",{className:"text-green-700 font-semibold landscape:hidden",children:["+",e.reward]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm landscape:text-xs",children:"\uD83E\uDE99"}),(0,r.jsx)("span",{className:"font-bold ".concat("epic"===l.tier?"text-purple-600":"rare"===l.tier?"text-blue-600":"text-gray-700"),children:e.reward})]})})}),e.unlocked&&e.unlockedAt&&(0,r.jsx)("p",{className:"text-yellow-900/60 text-xs text-center mt-0.5 landscape:hidden",children:new Date(e.unlockedAt).toLocaleDateString()}),e.unlocked&&(0,r.jsx)(n.E.div,{animate:{x:[-100,200]},transition:{repeat:1/0,duration:3,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent skew-x-12 pointer-events-none"})]},e.id)})})}),y&&(0,r.jsx)(d.V,{sourceX:y.x,sourceY:y.y,targetId:"achievements-coins",amount:y.amount,coinCount:Math.min(12,Math.max(5,y.amount)),onComplete:()=>j(null)}),(0,r.jsx)(n.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"mt-2 landscape:mt-1 bg-white/50 backdrop-blur-md rounded-xl landscape:rounded-lg p-2 landscape:p-1.5 text-center flex-shrink-0 landscape:hidden",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"\uD83D\uDCA1 Complete battles and lessons to unlock achievements!"})})]})}}}]);