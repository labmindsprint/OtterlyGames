"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{407:function(e,t,a){a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4370:function(e,t,a){a.r(t),a.d(t,{OnboardingTooltip:function(){return p}});var i=a(7437),o=a(2265),s=a(6440),n=a(9692),r=a(1706),l=a(8623),c=a(407),d=a(5712),u=a(6788);let m=[{id:"welcome",targetId:"title-area",position:"center",title:"Welcome! \uD83E\uDD8A",message:"Hi! I'm Foxy! Tap Next to learn about the game!",mascot:"\uD83E\uDD8A"},{id:"battle",targetId:"btn-fightSetup",position:"below",title:"Battle Mode! ⚔️",message:"Tap here to fight enemy tanks! Solve math to fire missiles!",mascot:"\uD83C\uDFAF"},{id:"universe",targetId:"btn-universe",position:"below",title:"Save the Universe! \uD83D\uDE80",message:"Explore space, discover planets, and save the galaxy with math!",mascot:"\uD83C\uDF0D"},{id:"lessons",targetId:"btn-lessons",position:"below",title:"Lessons & Practice! \uD83D\uDCD6",message:"Fun animated lessons for +, −, \xd7, and \xf7! Plus FREE practice mode!",mascot:"✨"},{id:"garage",targetId:"btn-garage",position:"below",title:"Your Garage! \uD83D\uDEF8",message:"Buy cool tanks and missiles with coins you earn!",mascot:"\uD83D\uDE80"},{id:"coins",targetId:"coins-display",position:"below",title:"Your Coins! \uD83E\uDE99",message:"Win battles to earn more coins!",mascot:"\uD83D\uDCB0"},{id:"ready",targetId:"title-area",position:"center",title:"You're Ready! \uD83C\uDFC6",message:"Go have fun and become a Math Champion! \uD83D\uDCAA",mascot:"\uD83E\uDD8A"}];function p(e){let{onComplete:t}=e,[a,p]=(0,o.useState)(0),[h,g]=(0,o.useState)({x:0,y:0,arrowX:50,arrowPos:"top"}),[x,w]=(0,o.useState)(!0),[b,f]=(0,o.useState)(!1),[y,D]=(0,o.useState)(!1),[v,N]=(0,o.useState)(!0),E=(0,o.useRef)(new Set),j=(0,o.useRef)(!0),C=m[a],I=a===m.length-1;(0,o.useEffect)(()=>(j.current=!0,(async()=>{(0,d.y3)(),await (0,u.gw)(),j.current&&D(!0)})(),()=>{j.current=!1,(0,u.NB)()}),[]),(0,o.useEffect)(()=>{let e=()=>{let e=document.getElementById(C.targetId);if(e&&"center"!==C.position){let t;let a=e.getBoundingClientRect(),i=window.innerHeight,o=window.innerWidth,s=a.left+a.width/2,n="top",r=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sat")||"0",10)||48,l=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")||"0",10)||24;"below"===C.position?(t=a.bottom+12,n="top",t+220+30>i&&(t=a.top-12,n="bottom")):(t=a.top-12,n="bottom"),t="top"===n?Math.min(t=Math.max(t,r+30),i-220-l-30):Math.max(t,220+r+30);let c=Math.min(280,o-48),d=c/2+24,u=Math.max(d,Math.min(o-d,s)),m=a.left+a.width/2;g({x:s=u,y:t,arrowX:Math.max(12,Math.min(88,(m-(u-c/2))/c*100)),arrowPos:n})}else g({x:window.innerWidth/2,y:window.innerHeight/2,arrowX:50,arrowPos:"top"})};e(),window.addEventListener("resize",e);let t=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}},[a,C.targetId,C.position]),(0,o.useEffect)(()=>{let e=document.getElementById(C.targetId);if(e&&"center"!==C.position)return e.style.zIndex="60",e.style.position="relative",e.classList.add("ring-4","ring-yellow-400","ring-opacity-75"),()=>{e.style.zIndex="",e.style.position="",e.classList.remove("ring-4","ring-yellow-400","ring-opacity-75")}},[a,C.targetId,C.position]),(0,o.useEffect)(()=>{if(!v||!x||!y||E.current.has(a)||document.hidden)return;let e=setTimeout(async()=>{j.current&&(E.current.add(a),f(!0),await (0,u.De)(C.message,.9),j.current&&f(!1))},400);return()=>clearTimeout(e)},[a,x,y,v,C.message]),(0,o.useEffect)(()=>{let e=()=>{document.hidden&&((0,u.NB)(),f(!1))};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);let k=()=>{v||((0,d.y3)(),N(!0))},S=()=>{k(),(0,u.NB)(),(0,d.GN)("tap"),(0,d.NH)("light"),I?t():p(e=>e+1)},P=()=>{k(),(0,u.NB)(),(0,d.GN)("tap"),t()},B=()=>{k(),x&&(0,u.NB)(),w(!x),(0,d.GN)("tap")};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 pointer-events-auto",onClick:S,style:{background:"rgba(0, 0, 0, 0.7)"}}),(0,i.jsx)(n.M,{mode:"wait",children:(0,i.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed z-[70] pointer-events-auto inset-x-0 flex justify-center px-6",style:{top:"top"===h.arrowPos?"".concat(h.y,"px"):"auto",bottom:"bottom"===h.arrowPos?"calc(100vh - ".concat(h.y,"px)"):"auto"},children:(0,i.jsxs)("div",{className:"w-full max-w-[280px]",children:["center"!==C.position&&(0,i.jsx)("div",{className:"absolute -translate-x-1/2 w-0 h-0 border-l-[12px] border-r-[12px] border-l-transparent border-r-transparent ".concat("top"===h.arrowPos?"-top-3 border-b-[12px] border-b-purple-600":"-bottom-3 border-t-[12px] border-t-purple-600"),style:{left:"".concat(h.arrowX,"%")}}),(0,i.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-4 shadow-2xl border-2 border-white/30",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("h3",{className:"text-white font-bold text-lg flex-1",children:C.title}),(0,i.jsx)("button",{onClick:e=>{e.stopPropagation(),B()},className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(x?"bg-white/30":"bg-white/10"),children:x?(0,i.jsx)(r.Z,{className:"w-4 h-4 text-white ".concat(b?"animate-pulse":"")}):(0,i.jsx)(l.Z,{className:"w-4 h-4 text-white/50"})})]}),(0,i.jsx)("p",{className:"text-white/90 text-base mb-4 leading-relaxed",children:C.message}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:e=>{e.stopPropagation(),P()},className:"flex-1 py-2.5 rounded-xl bg-white/20 text-white/80 font-semibold text-sm",children:"Skip"}),(0,i.jsxs)("button",{onClick:e=>{e.stopPropagation(),S()},className:"flex-[2] py-2.5 rounded-xl bg-white text-purple-600 font-bold text-sm flex items-center justify-center gap-1",children:[I?"Let's Go! \uD83C\uDFAE":"Next",!I&&(0,i.jsx)(c.Z,{className:"w-4 h-4"})]})]}),(0,i.jsx)("div",{className:"flex justify-center gap-1.5 mt-3",children:m.map((e,t)=>(0,i.jsx)("div",{className:"h-1.5 rounded-full transition-all ".concat(t===a?"w-4 bg-white":t<a?"w-1.5 bg-white/60":"w-1.5 bg-white/30")},t))})]})]})},C.id)})]})}t.default=p}}]);